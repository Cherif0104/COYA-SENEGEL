<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Titre + favicon : COYA.PRO (remplace Odoo) -->
    <template id="sunugest_web_layout" inherit_id="web.layout">
        <xpath expr="//title" position="replace">
            <title>COYA ERP · SENEGEL</title>
        </xpath>
        <xpath expr="//link[@rel='shortcut icon' or (@rel='icon' and not(@sizes))]" position="replace">
            <link type="image/png" rel="icon" href="/sunugest_branding/static/img/logo_senegel.png"/>
        </xpath>
    </template>

    <!-- Footer / promotion : SENEGEL · COYA.PRO au lieu de Powered by Odoo -->
    <template id="sunugest_brand_promotion" inherit_id="web.brand_promotion">
        <xpath expr="//div[contains(@class, 'o_brand_promotion')]" position="replace">
            <div class="o_brand_promotion">
                <a href="https://www.senegel.org" target="_blank" rel="noopener">SENEGEL · COYA.PRO</a>
                <span> — </span>
                <a href="mailto:techsupport@senegel.org">techsupport@senegel.org</a>
            </div>
        </xpath>
    </template>

    <!-- Login : deux panneaux (maquette) — gauche formulaire, droit SENEGEL/COYA -->
    <template id="sunugest_login_layout" inherit_id="web.login_layout" priority="99">
        <xpath expr="//div[contains(@class, 'container') and contains(@class, 'py-5')][.//div[contains(@class, 'o_database_list')]]" position="replace">
            <div class="coya-login-split coya-login-page">
                <div class="coya-login-left">
                    <div class="coya-login-brand">
                        <div class="coya-login-logo-circle">
                            <img src="/sunugest_branding/static/img/logo_senegel.png" alt="SENEGEL"/>
                        </div>
                        <p class="coya-login-slogan">Créer une opportunité pour la jeunesse d'Afrique</p>
                    </div>
                    <div class="card border-0 coya-login-card o_database_list">
                        <div class="card-body">
                            <h2 class="coya-login-title">Connectez-vous</h2>
                            <t t-out="0"/>
                            <div class="text-center small mt-4 pt-3 border-top" t-if="not disable_footer">
                                <a href="https://www.senegel.org" target="_blank" rel="noopener">© SENEGEL · COYA.PRO</a>
                                <span> — </span>
                                <a href="mailto:techsupport@senegel.org">Assistance: techsupport@senegel.org</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="coya-login-right">
                    <div class="coya-welcome-block">
                        <h2 class="coya-welcome-title">Bonjour JAMBAR Jii</h2>
                        <p class="coya-welcome-subtitle">— Bonjour le brave</p>
                        <p class="coya-welcome-desc">Renseignez vos informations et commencez l'aventure avec nous.</p>
                    </div>
                    <div class="coya-values-block">
                        <p class="coya-tagline">CITOYENNETÉ, TRANSPARENCE, COMPÉTENCES</p>
                        <p class="coya-trinite-desc">Notre pilier managérial : la <strong>Trinité</strong> — équilibre entre Productivité (Ndiguel), Profitabilité (Barké) et Professionnalisme (Yar).</p>
                    </div>
                    <a href="mailto:techsupport@senegel.org" class="btn coya-btn-outline">Contact · techsupport@senegel.org</a>
                    <p class="coya-login-credit">Cette plateforme est conçue par <a href="https://impulcia-afrique.com/" target="_blank" rel="noopener">IMPULCIA AFRIQUE</a></p>
                </div>
            </div>
        </xpath>
    </template>

    <!-- Formulaire de login : libellés et bouton en français -->
    <template id="sunugest_login_form_fr" inherit_id="web.login" priority="99">
        <xpath expr="//label[@for='db']" position="replace">
            <label for="db" class="col-form-label">Base de données</label>
        </xpath>
        <xpath expr="//a[@href='/web/database/selector']" position="replace">
            <a role="button" href="/web/database/selector" class="btn btn-secondary">Choisir <i class="fa fa-database" role="img" aria-label="Base de données" title="Base de données"></i></a>
        </xpath>
        <xpath expr="//label[@for='login']" position="replace">
            <label for="login" class="form-label d-flex justify-content-between">Adresse e-mail</label>
        </xpath>
        <xpath expr="//input[@name='login']" position="attributes">
            <attribute name="placeholder">Adresse e-mail</attribute>
        </xpath>
        <xpath expr="//label[@for='password']" position="replace">
            <label for="password" class="form-label d-flex justify-content-between">Mot de passe</label>
        </xpath>
        <xpath expr="//input[@id='password']" position="attributes">
            <attribute name="placeholder">Mot de passe</attribute>
        </xpath>
        <xpath expr="//div[contains(@class, 'oe_login_buttons')]//button[@type='submit' and not(@name='redirect')]" position="replace">
            <button type="submit" class="btn btn-primary">Connexion</button>
        </xpath>
        <xpath expr="//button[@name='redirect' and @value='/web/become']" position="replace">
            <button type="submit" name="redirect" value="/web/become" class="btn btn-link btn-sm">Connexion superutilisateur</button>
        </xpath>
    </template>

    <!-- Page « Vous êtes connecté » : textes en français -->
    <template id="sunugest_login_successful_fr" inherit_id="web.login_successful" priority="99">
        <xpath expr="//div[contains(@class, 'oe_login_form')]/p" position="replace">
            <p>Vous êtes connecté.</p>
        </xpath>
        <xpath expr="//a[contains(@href, '/web/session/logout')]" position="replace">
            <a class="btn btn-primary btn-block" href="/web/session/logout">Déconnexion</a>
        </xpath>
    </template>

    <!-- Page « Hors ligne » : charte COYA.PRO / SENEGEL (vert + jaune) -->
    <template id="coya_offline" inherit_id="web.webclient_offline">
        <xpath expr="//t[@t-set='title']" position="replace">
            <t t-set="title">COYA.PRO — Hors ligne</t>
        </xpath>
        <xpath expr="//t[@t-set='head']" position="replace">
            <t t-set="head">
                <script type="text/javascript">
                    document.addEventListener("DOMContentLoaded", () => {
                        const cookies = document.cookie.split(';').map(c => c.trim());
                        if (cookies.includes('color_scheme=dark')) {
                            document.body.style.backgroundColor = "#1a2e24";
                            document.body.style.color = "#F4F8FB";
                        }
                    });
                    window.addEventListener('online', () => location.reload());
                </script>
                <style>
                    body {
                        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
                        padding: 0; margin: 0;
                        background: linear-gradient(135deg, #a8e6cf 0%, #7dd3a8 40%, #2d8a5a 70%, #1a5f3a 100%);
                        color: #1a5f3a;
                        display: flex; align-items: center; justify-content: center; text-align: center;
                        min-height: 100vh; width: 100vw; user-select: none;
                    }
                    .card {
                        background: rgba(255,255,255,0.97);
                        border-radius: 1rem;
                        padding: 2.5rem;
                        box-shadow: 0 8px 32px rgba(0,0,0,0.12);
                        border: 1px solid rgba(26,95,58,0.2);
                        max-width: 420px;
                    }
                    .card .coya-offline-logo {
                        width: 100px; height: auto; margin-bottom: 1rem;
                    }
                    .card h1 { color: #1a5f3a; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.75rem; }
                    .card p { color: #247a4a; font-size: 0.95rem; margin-bottom: 1.5rem; line-height: 1.5; }
                    .card button {
                        background: #e8b923;
                        color: #1a5f3a;
                        border: 2px solid #1a5f3a;
                        border-radius: 0.5rem;
                        padding: 0.6rem 1.5rem;
                        cursor: pointer;
                        font-size: 1rem;
                        font-weight: 700;
                    }
                    .card button:hover { background: #f0c94a; filter: brightness(1.05); }
                </style>
                <meta name="viewport" content="width=device-width, initial-scale=1"/>
            </t>
        </xpath>
        <xpath expr="//div[contains(@class, 'card')]" position="replace">
            <div class="card">
                <img class="coya-offline-logo" src="/sunugest_branding/static/img/logo_senegel.png" alt="SENEGEL"/>
                <h1>Vous êtes hors ligne</h1>
                <p>Vérifiez votre connexion réseau et revenez ici. COYA.PRO se rechargera dès que vous serez en ligne.</p>
                <p class="small mt-2"><a href="mailto:techsupport@senegel.org" style="color: #1a5f3a; font-weight: 600;">Assistance : techsupport@senegel.org</a></p>
                <button type="button" onclick="location.reload()">Revérifier</button>
            </div>
        </xpath>
    </template>
</odoo>
