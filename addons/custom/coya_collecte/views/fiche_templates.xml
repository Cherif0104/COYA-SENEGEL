<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="fiche_public_form_template" name="Formulaire public COYA">
        <t t-call="web.layout">
            <t t-set="title" t-value="fiche_type.name"/>
            <t t-set="head">
                <meta name="viewport" content="width=device-width, initial-scale=1"/>
                <style>
                    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 0; padding: 2rem; background: linear-gradient(165deg, rgba(168,230,207,0.2) 0%, #f4f8fb 50%); min-height: 100vh; }
                    .coya-fiche-container { max-width: 600px; margin: 0 auto; background: #fff; border-radius: 1rem; box-shadow: 0 8px 32px rgba(26,95,58,0.12); padding: 2rem; border: 1px solid rgba(26,95,58,0.1); }
                    .coya-fiche-title { color: #1a5f3a; font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; }
                    .coya-fiche-desc { color: #666; margin-bottom: 1.5rem; }
                    .coya-fiche-field { margin-bottom: 1rem; }
                    .coya-fiche-label { display: block; color: #1a5f3a; font-weight: 600; margin-bottom: 0.25rem; }
                    .coya-fiche-input { width: 100%; padding: 0.6rem 1rem; border: 1px solid rgba(26,95,58,0.25); border-radius: 0.5rem; font-size: 1rem; }
                    .coya-fiche-input:focus { outline: none; border-color: #1a5f3a; box-shadow: 0 0 0 2px rgba(26,95,58,0.2); }
                    .coya-fiche-btn { background: #e8b923; color: #fff; border: 2px solid #1a5f3a; padding: 0.75rem 1.5rem; border-radius: 0.5rem; font-weight: 700; font-size: 1rem; cursor: pointer; margin-top: 1rem; }
                    .coya-fiche-btn:hover { background: #f0c94a; }
                    .coya-fiche-logo { text-align: center; margin-bottom: 1rem; }
                    .coya-fiche-logo img { max-height: 60px; }
                </style>
            </t>
            <t t-set="body_classname" t-value="''"/>
            <div class="coya-fiche-container">
                <div class="coya-fiche-logo">
                    <img src="/sunugest_branding/static/img/logo_senegel.png" alt="COYA.PRO"/>
                </div>
                <h1 class="coya-fiche-title" t-esc="fiche_type.name"/>
                <p class="coya-fiche-desc" t-if="fiche_type.description" t-esc="fiche_type.description"/>
                <form method="post" action="">
                            <t t-foreach="fiche_type.champ_ids.sorted('sequence')" t-as="champ">
                        <div class="coya-fiche-field">
                            <label class="coya-fiche-label" t-att-for="champ.technical_name">
                                <t t-esc="champ.name"/>
                                <t t-if="champ.required"> *</t>
                            </label>
                            <t t-if="champ.champ_type == 'text'">
                                <textarea class="coya-fiche-input" t-att-name="champ.technical_name" t-att-required="'required' if champ.required else None" rows="4"/>
                            </t>
                            <t t-elif="champ.champ_type == 'selection'">
                                <select class="coya-fiche-input" t-att-name="champ.technical_name" t-att-required="'required' if champ.required else None">
                                    <option value="">— Sélectionner —</option>
                                    <t t-foreach="(champ.selection_options or '').split('\n')" t-as="opt">
                                        <t t-if="opt.strip()">
                                            <option t-att-value="opt.strip()" t-esc="opt.strip()"/>
                                        </t>
                                    </t>
                                </select>
                            </t>
                            <t t-elif="champ.champ_type == 'boolean'">
                                <input type="checkbox" class="coya-fiche-input" t-att-name="champ.technical_name" style="width: auto;"/>
                            </t>
                            <t t-elif="champ.champ_type == 'email'">
                                <input type="email" class="coya-fiche-input" t-att-name="champ.technical_name" t-att-required="'required' if champ.required else None"/>
                            </t>
                            <t t-elif="champ.champ_type == 'phone'">
                                <input type="tel" class="coya-fiche-input" t-att-name="champ.technical_name" t-att-required="'required' if champ.required else None"/>
                            </t>
                            <t t-elif="champ.champ_type in ('integer', 'float')">
                                <input type="number" class="coya-fiche-input" t-att-name="champ.technical_name" t-att-required="'required' if champ.required else None" t-att-step="0.01 if champ.champ_type == 'float' else 1"/>
                            </t>
                            <t t-elif="champ.champ_type == 'date'">
                                <input type="date" class="coya-fiche-input" t-att-name="champ.technical_name" t-att-required="'required' if champ.required else None"/>
                            </t>
                            <t t-elif="champ.champ_type == 'datetime'">
                                <input type="datetime-local" class="coya-fiche-input" t-att-name="champ.technical_name" t-att-required="'required' if champ.required else None"/>
                            </t>
                            <t t-else="">
                                <input type="text" class="coya-fiche-input" t-att-name="champ.technical_name" t-att-required="'required' if champ.required else None"/>
                            </t>
                        </div>
                    </t>
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <t t-if="bootcamp_id">
                        <input type="hidden" name="bootcamp_id" t-att-value="bootcamp_id"/>
                    </t>
                    <t t-if="cohorte_id">
                        <input type="hidden" name="cohorte_id" t-att-value="cohorte_id"/>
                    </t>
                    <button type="submit" class="coya-fiche-btn">Envoyer</button>
                </form>
            </div>
        </t>
    </template>

    <template id="fiche_public_thanks_template" name="Merci - Formulaire soumis">
        <t t-call="web.layout">
            <t t-set="head">
                <meta name="viewport" content="width=device-width, initial-scale=1"/>
                <style>
                    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 0; padding: 2rem; background: linear-gradient(165deg, rgba(168,230,207,0.2) 0%, #f4f8fb 50%); min-height: 100vh; display: flex; align-items: center; justify-content: center; }
                    .coya-fiche-thanks { max-width: 500px; text-align: center; background: #fff; padding: 2.5rem; border-radius: 1rem; box-shadow: 0 8px 32px rgba(26,95,58,0.12); }
                    .coya-fiche-thanks h1 { color: #1a5f3a; font-size: 1.5rem; }
                    .coya-fiche-thanks p { color: #666; margin-top: 1rem; }
                </style>
            </t>
            <t t-set="body_classname" t-value="''"/>
            <div class="coya-fiche-thanks">
                <h1>Merci !</h1>
                <p>Votre formulaire a bien été envoyé. Nous avons bien reçu vos informations.</p>
            </div>
        </t>
    </template>
</odoo>
