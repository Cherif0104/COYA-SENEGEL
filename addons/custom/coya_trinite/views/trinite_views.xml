<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data noupdate="1">
    <!-- Plans de paie -->
    <record id="view_coya_trinite_plan_tree" model="ir.ui.view">
        <field name="name">coya.trinite.plan.tree</field>
        <field name="model">coya.trinite.plan</field>
        <field name="arch" type="xml">
            <list string="Plans de paie" editable="bottom">
                <field name="name"/>
                <field name="heures_base"/>
            </list>
        </field>
    </record>
    <record id="view_coya_trinite_plan_form" model="ir.ui.view">
        <field name="name">coya.trinite.plan.form</field>
        <field name="model">coya.trinite.plan</field>
        <field name="arch" type="xml">
            <form string="Plan de paie">
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="heures_base"/>
                    </group>
                    <group>
                        <field name="description" colspan="2"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Fiche employé : bloc Trinité -->
    <record id="view_hr_employee_form_trinite" model="ir.ui.view">
        <field name="name">hr.employee.form.trinite</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet" position="inside">
                <group string="Trinité (dernière période)" name="group_trinite">
                    <field name="last_trinite_score_id" invisible="1"/>
                    <field name="score_ndiguel" readonly="1"/>
                    <field name="score_barke" readonly="1"/>
                    <field name="score_yar" readonly="1"/>
                </group>
                <field name="trinite_score_ids" nolabel="1" readonly="1" colspan="2">
                    <list string="Historique scores" create="0" delete="0" edit="0">
                        <field name="periode_start"/>
                        <field name="periode_end"/>
                        <field name="score_ndiguel"/>
                        <field name="score_barke"/>
                        <field name="score_yar"/>
                    </list>
                </field>
            </xpath>
        </field>
    </record>

    <!-- Scores Trinité -->
    <record id="view_coya_trinite_score_tree" model="ir.ui.view">
        <field name="name">coya.trinite.score.tree</field>
        <field name="model">coya.trinite.score</field>
        <field name="arch" type="xml">
            <list string="Scores Trinité" editable="bottom">
                <field name="employee_id"/>
                <field name="periode_start"/>
                <field name="periode_end"/>
                <field name="score_ndiguel"/>
                <field name="score_barke"/>
                <field name="score_yar"/>
            </list>
        </field>
    </record>
    <record id="view_coya_trinite_score_form" model="ir.ui.view">
        <field name="name">coya.trinite.score.form</field>
        <field name="model">coya.trinite.score</field>
        <field name="arch" type="xml">
            <form string="Score Trinité">
                <sheet>
                    <group>
                        <field name="employee_id"/>
                        <field name="periode_start"/>
                        <field name="periode_end"/>
                    </group>
                    <group string="Scores (0-100)">
                        <field name="score_ndiguel"/>
                        <field name="score_barke"/>
                        <field name="score_yar"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Alertes -->
    <record id="view_coya_trinite_alerte_tree" model="ir.ui.view">
        <field name="name">coya.trinite.alerte.tree</field>
        <field name="model">coya.trinite.alerte</field>
        <field name="arch" type="xml">
            <list string="Alertes Conseil" decoration-danger="state == 'open'" editable="bottom">
                <field name="employee_id"/>
                <field name="pilier"/>
                <field name="score"/>
                <field name="seuil"/>
                <field name="state"/>
            </list>
        </field>
    </record>
    <record id="view_coya_trinite_alerte_form" model="ir.ui.view">
        <field name="name">coya.trinite.alerte.form</field>
        <field name="model">coya.trinite.alerte</field>
        <field name="arch" type="xml">
            <form string="Alerte Trinité">
                <sheet>
                    <group>
                        <field name="employee_id"/>
                        <field name="pilier"/>
                        <field name="score"/>
                        <field name="seuil"/>
                        <field name="state"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Actions -->
    <record id="action_coya_trinite_plan" model="ir.actions.act_window">
        <field name="name">Plans de paie</field>
        <field name="res_model">coya.trinite.plan</field>
        <field name="view_mode">list,form</field>
    </record>
    <record id="action_coya_trinite_score" model="ir.actions.act_window">
        <field name="name">Scores Trinité</field>
        <field name="res_model">coya.trinite.score</field>
        <field name="view_mode">list,form</field>
    </record>
    <record id="action_coya_trinite_alerte" model="ir.actions.act_window">
        <field name="name">Alertes Conseil</field>
        <field name="res_model">coya.trinite.alerte</field>
        <field name="view_mode">list,form</field>
        <field name="context" eval="{'search_default_open': 1}"/>
    </record>

    <!-- Client action Dashboard Trinité -->
    <record id="action_coya_trinite_dashboard" model="ir.actions.client">
        <field name="name">Dashboard Trinité</field>
        <field name="tag">coya_trinite_dashboard</field>
        <field name="target">current</field>
    </record>

    <!-- Menus -->
    <menuitem id="menu_coya_trinite_root"
              name="Trinité"
              parent="coya_departments.menu_coya_department_qualite"
              sequence="60"
              groups="coya_departments.group_coya_departments_qualite"
              web_icon="hr,static/description/icon.png"/>

    <menuitem id="menu_coya_trinite_dashboard"
              name="Dashboard"
              parent="menu_coya_trinite_root"
              action="action_coya_trinite_dashboard"
              sequence="5"/>

    <menuitem id="menu_coya_trinite_plan"
              name="Plans de paie"
              parent="menu_coya_trinite_root"
              action="action_coya_trinite_plan"
              sequence="10"/>

    <menuitem id="menu_coya_trinite_score"
              name="Scores"
              parent="menu_coya_trinite_root"
              action="action_coya_trinite_score"
              sequence="20"/>

    <menuitem id="menu_coya_trinite_alerte"
              name="Alertes Conseil"
              parent="menu_coya_trinite_root"
              action="action_coya_trinite_alerte"
              sequence="30"/>
    </data>
</odoo>
