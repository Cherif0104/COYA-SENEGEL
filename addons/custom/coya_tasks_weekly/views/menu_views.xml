<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="action_coya_tasks_week" model="ir.actions.act_window">
        <field name="name">Tâches de la semaine</field>
        <field name="res_model">project.task</field>
        <field name="view_mode">list,form</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">Aucune tâche pour cette semaine.</p>
            <p>Utilisez le menu "Tâches de la semaine" pour afficher les tâches dont la date limite est dans la semaine courante (point hebdo). Cochez "Livrée" après le point.</p>
        </field>
    </record>
    <record id="action_coya_tasks_week_server" model="ir.actions.server">
        <field name="name">Tâches de la semaine</field>
        <field name="model_id" ref="project.model_project_task"/>
        <field name="state">code</field>
        <field name="code">action = model.action_open_week_tasks()</field>
    </record>
    <record id="view_project_task_search_weekly" model="ir.ui.view">
        <field name="name">project.task.search.weekly</field>
        <field name="model">project.task</field>
        <field name="inherit_id" ref="project.view_task_search_form"/>
        <field name="arch" type="xml">
            <xpath expr="//search" position="inside">
                <filter string="Non livrées" name="not_livree" domain="[('livree', '=', False)]"/>
                <filter string="Livrées" name="livree" domain="[('livree', '=', True)]"/>
                <separator/>
                <filter string="Hebdo partagée" name="hebdo" domain="[('task_type', '=', 'hebdo_partagee')]"/>
                <filter string="Journalière" name="journaliere" domain="[('task_type', '=', 'journaliere')]"/>
            </xpath>
        </field>
    </record>
    <record id="menu_coya_tasks_week" model="ir.ui.menu">
        <field name="name">Tâches de la semaine</field>
        <field name="parent_id" ref="project.menu_project_management"/>
        <field name="sequence">5</field>
        <field name="action" ref="action_coya_tasks_week_server"/>
    </record>
</odoo>
