# COYA.PRO – Odoo en LOCAL (Docker Desktop) avec la BDD sur le VPS
#
# Utilise la base PostgreSQL déjà déployée sur le VPS (5.189.175.90).
# Idéal pour tester en local sans importer la BDD.
#
# 1. Sur le VPS : autoriser les connexions PostgreSQL depuis ton IP
#    (pg_hba.conf, firewall 5432). Voir docs/DEPLOI-LOCAL-VPS-DB.md
# 2. Lancer : docker compose -f docker-compose.local-vps-db.yml up -d
# 3. Ouvrir : http://localhost:8069

services:
  odoo:
    image: odoo:18
    ports:
      - "8069:8069"
    environment:
      HOST: 5.189.175.90
      USER: odoo
      PASSWORD: odoo
      PORT: "5432"
    command: ["odoo", "-c", "/etc/odoo/odoo-local-vps.conf"]
    volumes:
      - odoo-web-data-local:/var/lib/odoo
      - ./addons/custom:/mnt/extra-addons
      - ./config:/etc/odoo
    restart: unless-stopped

volumes:
  odoo-web-data-local:
